---
import { getCollection, render } from "astro:content";
import Layout from "@/layouts/Layout.astro";
import Markdown2 from "@/components/Markdown2.astro";
import CodeBlock from "@/components/CodeBlock.astro";
import Container from "@/components/Container.astro";

const { slug } = Astro.params;
const all = await getCollection("snippets");
const entry = all.find((e) => e.data.slug === slug);
if (!entry) throw new Error("Snippet not found");
const rendered = await render(entry);
---

<Layout title={entry.data.title} description={entry.body?.slice(0, 140)}>
  <Container>
    <div class="w-full flex flex-col gap-4">
      <h1>{entry.data.title}</h1>
      <Markdown2 Content={rendered.Content} components={{ CodeBlock }} />
    </div>
  </Container>
</Layout>
